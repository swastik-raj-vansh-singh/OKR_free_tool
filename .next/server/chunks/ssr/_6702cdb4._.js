module.exports=[87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},67900,a=>{"use strict";let b=(0,a.i(70106).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);a.s(["Building2",()=>b],67900)},50429,a=>{"use strict";let b=(0,a.i(70106).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);a.s(["Target",()=>b],50429)},33688,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(3130),g=a.i(54161),h=a.i(96221),i=a.i(16201);let j=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var k=a.i(92258),l=a.i(41675),m=a.i(67900),n=a.i(50429);function o(){let a=(0,d.useParams)(),o=(0,d.useRouter)(),p=Array.isArray(a.token)?a.token[0]:a.token,[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{async function a(){try{let a=await fetch(`/api/invite/${p}`),b=await a.json();if(!a.ok||!b.success){x(b.error||"Invalid invitation link"),t(!1);return}r(b.data),t(!1)}catch(a){console.error("Error fetching invitation:",a),x("Failed to load invitation. Please try again."),t(!1)}}p&&a()},[p]);let A=async()=>{v(!0);try{let a=await fetch("/api/invite/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p})}),b=await a.json();if(!a.ok||!b.success){x(b.error||"Failed to accept invitation"),v(!1);return}q?.user.id&&localStorage.setItem("userId",q.user.id),z(!0),v(!1)}catch(a){console.error("Error accepting invitation:",a),x("Failed to accept invitation. Please try again."),v(!1)}};return s?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-accent/5",children:(0,b.jsx)(f.Card,{className:"w-full max-w-md border-border/50 bg-card/50 backdrop-blur",children:(0,b.jsx)(f.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)(h.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading invitation..."})]})})})}):w||!q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-destructive/5",children:(0,b.jsx)(f.Card,{className:"w-full max-w-md border-destructive/50 bg-card/50 backdrop-blur",children:(0,b.jsx)(f.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"mx-auto p-3 rounded-full bg-destructive/10 w-fit",children:(0,b.jsx)(j,{className:"w-12 h-12 text-destructive"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Invalid Invitation"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:w||"This invitation link is invalid or has expired."})]}),(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>o.push("/dashboard"),children:"Return Home"})]})})})}):y?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-accent/5",children:(0,b.jsx)(f.Card,{className:"w-full max-w-md border-accent/50 bg-card/50 backdrop-blur",children:(0,b.jsx)(f.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"mx-auto p-3 rounded-full bg-accent/10 w-fit",children:(0,b.jsx)(i.CheckCircle,{className:"w-12 h-12 text-accent"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Welcome Aboard!"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["You've successfully accepted your OKRs for ",q.okr.company_name,"."]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Your objectives are now finalized and ready to track."})]}),(0,b.jsx)(e.Button,{onClick:()=>o.push("/dashboard"),children:"Go to Dashboard"})]})})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 py-12 px-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)(f.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-2xl",children:"You've been invited!"}),(0,b.jsxs)(f.CardDescription,{children:[q.leader?.name||"Your leader"," has invited you to join the OKR planning for"," ",q.okr.company_name]})]}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-accent border-accent/30",children:"Draft OKRs"})]})}),(0,b.jsx)(f.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Email"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:q.user.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(n.Target,{className:"w-4 h-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Role"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:q.user.role})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(m.Building2,{className:"w-4 h-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Company"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:q.okr.company_name})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(l.Calendar,{className:"w-4 h-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Planning Period"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:q.okr.planning_period})]})]})]})})]}),(0,b.jsxs)(f.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{className:"text-lg",children:"Your Strategic Context"}),(0,b.jsx)(f.CardDescription,{children:"How your work contributes to the overall strategy"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-line leading-relaxed",children:q.okr.strategic_narrative})})]}),(0,b.jsxs)(f.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{className:"text-lg",children:"Your Objectives & Key Results"}),(0,b.jsxs)(f.CardDescription,{children:[Array.isArray(q.okr.okrs)?q.okr.okrs.length:0," objectives proposed for you"]})]}),(0,b.jsx)(f.CardContent,{className:"space-y-4",children:Array.isArray(q.okr.okrs)&&q.okr.okrs.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-border bg-background/50",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,b.jsxs)(g.Badge,{variant:"secondary",children:["O",c+1]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-medium",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]})]}),(0,b.jsx)("div",{className:"space-y-2 pl-4",children:Array.isArray(a.key_results)&&a.key_results.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground w-8",children:["KR",c+1]}),(0,b.jsx)("span",{className:"flex-1 text-muted-foreground",children:a.title}),(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs",children:[a.baseline_value," â†’ ",a.target_value," ",a.unit]})]},c))})]},c))})]}),(0,b.jsx)(f.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:(0,b.jsxs)(f.CardContent,{className:"py-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>o.push("/"),disabled:u,children:"Decline"}),(0,b.jsx)(e.Button,{onClick:A,disabled:u,size:"lg",className:"min-w-[200px]",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Accepting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept OKRs"]})})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-4",children:["By accepting, you confirm these objectives and commit to working towards these goals for"," ",q.okr.planning_period,"."]})]})})]})})}a.s(["default",()=>o],33688)}];

//# sourceMappingURL=_6702cdb4._.js.map