(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let s=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],63488)},7486,e=>{"use strict";let s=(0,e.i(75254).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);e.s(["Building2",()=>s],7486)},20278,e=>{"use strict";let s=(0,e.i(75254).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>s],20278)},40433,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),t=e.i(67881),i=e.i(70065),c=e.i(94179),d=e.i(31278),n=e.i(69638);let l=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=e.i(63488),m=e.i(87316),x=e.i(7486),h=e.i(20278);function u(){let e=(0,a.useParams)(),u=(0,a.useRouter)(),p=Array.isArray(e.token)?e.token[0]:e.token,[j,g]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[f,v]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[C,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{async function e(){try{let e=await fetch(`/api/invite/${p}`),s=await e.json();if(!e.ok||!s.success){k(s.error||"Invalid invitation link"),y(!1);return}g(s.data),y(!1)}catch(e){console.error("Error fetching invitation:",e),k("Failed to load invitation. Please try again."),y(!1)}}p&&e()},[p]);let A=async()=>{v(!0);try{let e=await fetch("/api/invite/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p})}),s=await e.json();if(!e.ok||!s.success){k(s.error||"Failed to accept invitation"),v(!1);return}j?.user.id&&localStorage.setItem("userId",j.user.id),w(!0),v(!1)}catch(e){console.error("Error accepting invitation:",e),k("Failed to accept invitation. Please try again."),v(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-accent/5",children:(0,s.jsx)(i.Card,{className:"w-full max-w-md border-border/50 bg-card/50 backdrop-blur",children:(0,s.jsx)(i.CardContent,{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(d.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading invitation..."})]})})})}):N||!j?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-destructive/5",children:(0,s.jsx)(i.Card,{className:"w-full max-w-md border-destructive/50 bg-card/50 backdrop-blur",children:(0,s.jsx)(i.CardContent,{className:"py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto p-3 rounded-full bg-destructive/10 w-fit",children:(0,s.jsx)(l,{className:"w-12 h-12 text-destructive"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Invalid Invitation"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:N||"This invitation link is invalid or has expired."})]}),(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>u.push("/dashboard"),children:"Return Home"})]})})})}):C?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-accent/5",children:(0,s.jsx)(i.Card,{className:"w-full max-w-md border-accent/50 bg-card/50 backdrop-blur",children:(0,s.jsx)(i.CardContent,{className:"py-12",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto p-3 rounded-full bg-accent/10 w-fit",children:(0,s.jsx)(n.CheckCircle,{className:"w-12 h-12 text-accent"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Welcome Aboard!"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["You've successfully accepted your OKRs for ",j.okr.company_name,"."]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Your objectives are now finalized and ready to track."})]}),(0,s.jsx)(t.Button,{onClick:()=>u.push("/dashboard"),children:"Go to Dashboard"})]})})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)(i.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i.CardTitle,{className:"text-2xl",children:"You've been invited!"}),(0,s.jsxs)(i.CardDescription,{children:[j.leader?.name||"Your leader"," has invited you to join the OKR planning for"," ",j.okr.company_name]})]}),(0,s.jsx)(c.Badge,{variant:"outline",className:"text-accent border-accent/30",children:"Draft OKRs"})]})}),(0,s.jsx)(i.CardContent,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(o.Mail,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Email"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:j.user.email})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(h.Target,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Role"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:j.user.role})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(x.Building2,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Company"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:j.okr.company_name})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,s.jsx)(m.Calendar,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Planning Period"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:j.okr.planning_period})]})]})]})})]}),(0,s.jsxs)(i.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{className:"text-lg",children:"Your Strategic Context"}),(0,s.jsx)(i.CardDescription,{children:"How your work contributes to the overall strategy"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-line leading-relaxed",children:j.okr.strategic_narrative})})]}),(0,s.jsxs)(i.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{className:"text-lg",children:"Your Objectives & Key Results"}),(0,s.jsxs)(i.CardDescription,{children:[Array.isArray(j.okr.okrs)?j.okr.okrs.length:0," objectives proposed for you"]})]}),(0,s.jsx)(i.CardContent,{className:"space-y-4",children:Array.isArray(j.okr.okrs)&&j.okr.okrs.map((e,r)=>(0,s.jsxs)("div",{className:"p-4 rounded-lg border border-border bg-background/50",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,s.jsxs)(c.Badge,{variant:"secondary",children:["O",r+1]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]})]}),(0,s.jsx)("div",{className:"space-y-2 pl-4",children:Array.isArray(e.key_results)&&e.key_results.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground w-8",children:["KR",r+1]}),(0,s.jsx)("span",{className:"flex-1 text-muted-foreground",children:e.title}),(0,s.jsxs)(c.Badge,{variant:"outline",className:"text-xs",children:[e.baseline_value," â†’ ",e.target_value," ",e.unit]})]},r))})]},r))})]}),(0,s.jsx)(i.Card,{className:"border-border/50 bg-card/50 backdrop-blur",children:(0,s.jsxs)(i.CardContent,{className:"py-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>u.push("/"),disabled:f,children:"Decline"}),(0,s.jsx)(t.Button,{onClick:A,disabled:f,size:"lg",className:"min-w-[200px]",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Accepting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.CheckCircle,{className:"w-4 h-4 mr-2"}),"Accept OKRs"]})})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-4",children:["By accepting, you confirm these objectives and commit to working towards these goals for"," ",j.okr.planning_period,"."]})]})})]})})}e.s(["default",()=>u],40433)}]);